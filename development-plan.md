# 開発計画

## 技術選択

### Electron + Node.js 採用理由
- **クロスプラットフォーム対応**: Mac/Windows両対応
- **複数キーボード検知**: node-hidライブラリによるHIDデバイスアクセス
- **柔軟なUI**: Web技術による動的レイアウト
- **配布の容易さ**: 単一実行ファイルとしてパッケージング可能

### 主要ライブラリ
- **Electron**: デスクトップアプリケーション基盤
- **node-hid**: HIDデバイス（キーボード）アクセス
- **Express**: 内部API（必要に応じて）

## 開発フェーズ

### Phase 1: プロジェクト基盤構築
**目標**: 開発環境とプロジェクト構造の確立

**タスク**:
1. Electron + Node.jsプロジェクト初期化
2. package.json設定と依存関係インストール
3. 基本的なディレクトリ構造作成
4. 開発・ビルドスクリプト設定

**成果物**:
- 実行可能な最小限のElectronアプリ
- 開発環境の構築完了

### Phase 2: キーボード検知システム
**目標**: 複数キーボードの検知・識別機能

**タスク**:
1. HIDデバイス検知機能実装
2. キーボード識別・管理システム
3. キーボード入力イベントハンドリング
4. OS別抽象化レイヤー作成（Mac用実装）

**成果物**:
- 複数キーボード同時認識機能
- キーボード毎の入力判別機能

### Phase 3: ゲームロジック実装
**目標**: 多チーム対応ゲームの核となる機能

**タスク**:
1. 可変チーム数管理システム
2. キーボード↔チーム動的割り当て
3. お題単語生成・管理機能
4. リアルタイム入力判定・勝敗判定
5. スコア・進行状況管理

**成果物**:
- 基本的なゲームロジック
- チーム管理システム

### Phase 4: ユーザーインターフェース
**目標**: 保育園児向けの直感的UI実装

**タスク**:
1. 動的レイアウトシステム（チーム数対応）
2. 各チーム専用表示エリア
3. カラフル・親しみやすいデザイン
4. 音響・視覚効果実装

**成果物**:
- 完全な保育園児向けUI
- マルチチーム対応画面

### Phase 5: 設定・管理機能
**目標**: 先生が使いやすい管理機能

**タスク**:
1. ゲーム開始前設定画面
2. チーム・キーボード割り当て画面
3. 難易度・お題選択機能
4. 結果表示・保存機能

**成果物**:
- 管理者向け機能一式
- 設定保存・読込機能

### Phase 6: テスト・最適化・Windows対応
**目標**: 品質向上と対応OS拡大

**タスク**:
1. 複数キーボード接続テスト
2. 多チーム同時プレイ負荷テスト
3. Windows対応実装・テスト
4. パフォーマンス最適化
5. エラーハンドリング強化

**成果物**:
- 安定動作する完成品
- Windows対応版

## ディレクトリ構成

```
keyboard-game/
├── package.json                 # プロジェクト設定
├── main.js                     # Electronメインプロセス
├── src/                        # ソースコード
│   ├── renderer/               # レンダラープロセス（UI）
│   │   ├── index.html          # メインHTML
│   │   ├── styles/             # CSS
│   │   ├── scripts/            # フロントエンドJS
│   │   └── components/         # UIコンポーネント
│   ├── keyboard/               # キーボード検知・管理
│   │   ├── detector.js         # HIDデバイス検知
│   │   ├── manager.js          # キーボード管理
│   │   └── abstractions/       # OS別抽象化
│   ├── game/                   # ゲームロジック
│   │   ├── team-manager.js     # チーム管理
│   │   ├── word-manager.js     # お題管理
│   │   └── game-state.js       # ゲーム状態
│   ├── config/                 # 設定管理
│   │   └── settings.js         # 設定読込・保存
│   └── utils/                  # 共通処理
│       ├── logger.js           # ログ機能
│       └── helpers.js          # ヘルパー関数
├── assets/                     # 静的リソース
│   ├── images/                 # 画像ファイル
│   ├── sounds/                 # 音響ファイル
│   └── words/                  # お題データ
├── dist/                       # ビルド出力
└── docs/                       # ドキュメント
    ├── requirements.md         # 要件定義
    └── development-plan.md     # 本ファイル
```

## マイルストーン

| Phase | 期間目安 | 主な成果物 |
|-------|----------|------------|
| Phase 1 | 1-2日 | Electronアプリ基盤 |
| Phase 2 | 3-5日 | キーボード検知機能 |
| Phase 3 | 5-7日 | ゲームロジック |
| Phase 4 | 5-7日 | UI完成 |
| Phase 5 | 3-5日 | 管理機能 |
| Phase 6 | 5-7日 | 最終調整・Windows対応 |

**総開発期間**: 約3-4週間（22-33日）

## リスク要素と対策

### 技術的リスク
- **複数キーボード識別の困難さ**
  - 対策: 早期プロトタイプで技術検証
- **OS間の差異**
  - 対策: 抽象化レイヤーでの差異吸収

### スケジュールリスク
- **複雑な機能による遅延**
  - 対策: MVP（最小viable product）アプローチ
- **テスト時間不足**
  - 対策: 各フェーズでの継続的テスト